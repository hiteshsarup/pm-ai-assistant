{
  "messages": [
    {
      "role": "assistant",
      "content": "Hello! How can I help you with your PRD today?"
    },
    {
      "role": "user",
      "content": "Tell me all details about the indentation process"
    },
    {
      "role": "assistant",
      "content": "The indentation process within Shipsy's Transport Management System (TMS) revolves around the request sent to external vendors for vehicle and driver assignments for trips. Here's a structured breakdown of the indentation process, particularly focusing on its features and workflows.\n\n### 1. Overview of Indentation Process\n- An **indent** represents a request for a vehicle and driver assignment sent to external vendors based on specific criteria.\n- The process operates differently for two trip categories: **First/Last Mile (FLM) Trips** and **Inter Stock Transfers (IST) Trips**.\n\n### 2. Indent Configuration\n- The key organization-level configuration flag, `send_vehicle_requisition_request`, enables the vehicle requisition workflow.\n- Related settings control the behavior of indents for specific freight types (e.g., LTL vs. FTL):\n  - Example: `send_vehicle_requisition_request_ftl` and `send_vehicle_requisition_request_ltl`.\n\n### 3. Indentation Workflow\n#### **FLM Trip Indent Workflow**\n- **Step 1**: Initiation\n  - If indenting is enabled, the system does not assign a company vehicle during trip creation but allows vendors to be allocated based on vehicle type and route.\n  \n- **Step 2**: Vendor Notification\n  - The system sends out requests to vendors when applicable, utilizing endpoints that manage vendor requisitions.\n\n- **Step 3**: Vendor Response\n  - Vendors receive notifications through the Vendor Portal, where they can view pending vehicle requests, accept, or reject them.\n  \n- **Step 4**: Assignment\n  - Once a vendor accepts an indent, they can provide vehicle and driver details, marking the trip as active.\n\n- **Step 5**: Confirmation\n  - Upon successful vehicle assignment, the system sends a confirmation SMS to the vendor.\n\n#### **IST Trip Indent Workflow**\n- Similar to FLM but uses a different handler and data model (i.e., `InterStockTransfer` rather than `Trip`).\n- The process follows the same core steps: initiation, vendor notification, vendor response, assignment, and confirmation.\n\n### 4. Vendor Interactions\n- Vendors utilize the **Vendor Portal** to:\n  - View all active vehicle requests.\n  - Respond via options to accept, reject, or directly assign vehicles.\n- The portal supports comprehensive listing, filtering, and pagination functionalities.\n\n### 5. Key APIs Used\nSome significant API endpoints include:\n- **View Active Requests**: `/vehicle-requests/get`\n- **Accept Indent**: `/indent/event/accept`\n- **Reject Indent**: `/vehicle-requests/reject`\n- **Assign Vehicle**: `/assign/vehicle`\n- **Cancel Indent**: `/trip/event/indent_cancel`\n\n### 6. Conditions and Validations\n- There are strict validations enforced throughout the process to ensure that:\n  - Each vendor must have a contact number when indent is enabled (needed for SMS notifications).\n  - Assignment can only be performed if the trip is pending, and all data integrity checks (like document compliance) are met.\n\n### 7. Notification Mechanism\n- Upon various events (acceptance, rejection, assignment), the system generates notifications and events (like `IndentAcceptedEvent`, `IndentRejectedEvent`, and `IndentAssignedEvent`) for auditing and downstream processes.\n\n### 8. Error Handling\n- The system gracefully manages cases when:\n  - A vendor rejects a request \u2013 triggers reallocation to the next vendor.\n  - Indents might expire or be canceled, with appropriate cleanup and marking actions.\n\n### Summary\nThe indentation process within Shipsy's TMS is robust and involves a systematic workflow that ensures all necessary validations, notifications, and user interactions are properly managed. This leads to efficient vehicle assignment management and vendor coordination for successful trip executions.\n\nIf you need specific details or have further questions about any part of this process, feel free to ask!"
    }
  ],
  "mode": "generator",
  "approachType": "generic"
}